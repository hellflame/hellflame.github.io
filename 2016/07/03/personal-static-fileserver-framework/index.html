<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><title>个人静态文件服务器日志 | Hellflame</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="works,python,"><meta name="description" content="pleased or sad, everything dies with hellflame"><link rel="alternate" href="/atom.xml" title="Hellflame" type="application/atom+xml"><link rel="icon" href="/images/favicon.png"><link rel="apple-touch-icon" href="/images/favicon.png"><link href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/base.css"><link rel="stylesheet" href="/icon/iconfont.css"><link rel="stylesheet" href="/css/github-markdown.css"><link rel="stylesheet" href="/css/highlight.css"><script src="/js/util.js"></script><script src="/js/valine.min.js"></script><link href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" async></script><script src="/js/player.js"></script><link href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/leancloud-storage@3.11.0/dist/av-min.js"></script></head><body><div id="app"><div class="header-wrap"><header><div class="site-brand"><div class="site-title"> <a href="/">Hellflame</a></div></div><nav class="site-navigation"><ul class="nav-menu"><li class="nav-item" data-path="/"> <a href="/" target="_self">首页</a></li><li class="nav-item" data-path="/archives/"> <a href="/archives/" target="_self">归档</a></li><li class="nav-item" data-path="/categories/"> <a href="/categories/" target="_self">分类</a></li><li class="nav-item" data-path="/tags/"> <a href="/tags/" target="_self">标签</a></li><li class="nav-item" data-path="/friends/"> <a href="/friends/" target="_self">友链</a></li><li class="nav-item" data-path="/corner-story/"> <a href="/corner-story/" target="_self">转角杀</a></li><li class="nav-item" data-path="/about/"> <a href="/about/" target="_self">关于</a></li><li class="nav-item" data-path="https://github.com/hellflame"> <a href="https://github.com/hellflame" target="_self">Github</a></li></ul></nav><i class="iconfont icon-menu"></i></header></div><script src="/js/navigation.js"></script><div class="container post-index"><div class="post"><div style="position:fixed;right:1em;top:1.5em;cursor:pointer;z-index:999" onclick="toggleTOC()" id="toc"><div style="width:2em;height:2em"><div style="width:100%;height:3px;background:silver;margin-bottom:3px"></div><div style="width:100%;height:3px;background:silver;margin-bottom:3px"></div><div style="width:100%;height:3px;background:silver;margin-bottom:3px"></div></div></div><h1 class="article-title"> <span>个人静态文件服务器日志</span></h1><div class="article-top-meta"> <span>发布 : 2016-07-03</span> <span>分类 : <a href="/categories/works/">works</a></span> <span>浏览 : <span class="article-timer">--</span></span></div><div class="article-content"><div class="markdown-body"><blockquote><p>就实现本身其实并不困难，困难的是能够承诺一直提供可用链接背后付出的运维代价</p></blockquote><p>额，，，等我完成<code>pjax</code>的升级以及终端client端的制作之后感觉才会有些什么好说的23333</p><p>还有等我先完成手上两个网站先23333</p><hr><p>自己制作的个人静态文件服务器主要针对自己的博客的图片等静态文件的引用和调用，整个项目暂时没有开源，因为还有很多需要修改的地方，没好意思开源，暂时托管为私有仓库</p><h4 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h4><p><code>Server端</code>当然是在服务器上常驻后台运行的部分</p><p><img src="https://static.hellflame.net/resource/61ff37a01042f218f52624208ed54a28" alt="server端目录结构"></p><p>server的主要作用当然还是供自己上传资源以及提供资源，昨天去听了<code>开源中国</code>的<a href="http://www.oschina.net/news/69244/2016-oschina-conference-plan" target="_blank" rel="noopener">源创会</a>，里面就有关于微信图片存储架构的讲解，当然我并没有说两者能够相提并论，两者试用的对象本来就不一样，而且，这个静态服务器也没有鉴黄的需求讷2333</p><p><img src="https://static.hellflame.net/resource/4895e8061293c4f40e494f8dec905186" alt="源创会入场券"></p><blockquote><p> 更新 2016年 07月 02日 星期六 21:25:53 CST</p></blockquote><p>花现距离上一次更新static已经过去了很久23333，毕竟还有很多事情需要做的说诶，今天也终于完成了文件的分块存储，分块上传以及分块传输，逻辑也并不是很复杂，毕竟自己的需求也不是很严苛</p><p>此次更新主要就像上面所说，分块的处理，当然最终也取消了<code>pjax</code>的想法，因为所有文档在数据库中的存储和文件夹的存储方式是一样的，不同的文件夹和文档依靠<code>hash</code>来区分，也就是说，允许相同名称的文档和文件夹存在，如果同级目录存在两个相同的文件夹，使用直观的文件名来索引的话果断是不行的，然而使用唯一的<code>hash</code>放到url(32位甚至更长)的话，相当不直观，故最终放弃使用<code>pjax</code></p><p>当然当初说使用<code>pjax</code>后也有亲自尝试过<code>pjax</code>，然而发现，全程没有使用封装的<code>pjax</code>库也一样能方便的使用。只需要手动调用<code>history.pushState</code>就好了，而且我也只需要自行处理ajax的数据，angularjs渲染，整个实现原理挺简单的，并没有必要使用<code>pjax</code>库的感觉</p><p>好吧，那现在其实除了客户端的<code>UI</code>没有做完之外，其他的都已经差不多了捏～～～</p><p><img src="https://static.hellflame.net/resource/64894060742f4758dac19bd5119dacfd" alt="登录界面"></p><p><img src="https://static.hellflame.net/resource/3862d29ebfdadff80447209f9d294838" alt="文档列表界面"></p><p><img src="https://static.hellflame.net/resource/e6662ba7e928f0d2b988883cff2f601f" alt="预览界面"></p><p><img src="https://static.hellflame.net/resource/73cdd7139f557fd764227395e53e8f2b" alt="PC端界面"></p><hr><p>虽然可能还有很多可以优化的，不过，暂时先酱紫好了啦～～</p><h4 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h4><p>当然，client端的话，只会开发终端界面，不过已经写好了API部分，毕竟涉及到CLI的话，虽然简单，然而还是需要考虑很多的吧～</p></div></div><div class="copy-right"><div class="markdown-body"><blockquote> 本文作者 : hellflame<br> 原文链接 : <a href="">https://hellflame.github.io/2016/07/03/personal-static-fileserver-framework/</a><br> 版权声明 : 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</blockquote></div></div><div class="social-share" style="margin-top:-2rem" data-wechat-qrcode-title="<p>微信扫一扫</p>" data-wechat-qrcode-helper="<p>微信右上角, 扫一扫分享</p>" data-sites="qzone, qq, weibo, facebook, twitter"> <span style="color:#6b7487;font-size:1.4rem">分享到:</span></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js" async></script><div class="article-footer"><div class="article-meta pull-left"><span><i class="iconfont icon-06tags"></i> 标签: <span class="span--tag"><a href="/tags/python/">#python</a></span></span></div><div class="article-meta pull-right"></div></div></div><aside id="sidebar"><p id="sidebar-header"></p><ol id="sidebar-toc"></ol></aside><script async>getTOC().length||$("#toc").remove()</script><nav class="post-navigation"><div class="nav-pre"><i class="iconfont icon-prev"></i> 上一篇: <a href="/2016/04/23/re-from-the-new-world/" target="_self">Re:来自新世界</a></div><div class="nav-next"> 下一篇: <a href="/2016/07/03/end-of-college/" target="_self">致即将结束的大学</a><i class="iconfont icon-next"></i></div></nav><a href="#comment" class="comment-anchor"></a><div class="comment-title"><i class="iconfont icon-footprint"></i> 留下足迹<i class="iconfont icon-footprint"></i></div> <a style="margin-bottom:1em;display:block;cursor:pointer" onclick="gotoComment()">点击通过issue留言</a><div id="vcomments"></div><script defer="defer">new Valine({el:"#vcomments",appId:"a",appKey:"b",notify:!1,verify:!1,avatar:"robohash",placeholder:"不填邮箱，网址, 也能收到回复哦♪(^∇^*)\n当然也不一定会回复-_-",path:getRealPath()})</script><script defer="defer">
   function gotoComment() {
    location.href = `https://github.com/hellflame/hellflame.github.io/issues/new?title=关于%0A“%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%97%A5%E5%BF%97”&body=%23%23%23%20[原文地址](https://hellflame.github.io/2016/07/03/personal-static-fileserver-framework/)%0A%0A%23%23%23%20想说的话(问题/支持/异议)%20%20%0A%0A${document.getElementById('veditor').value}`
   }
   document.onreadystatechange = (e) => {
     if(document.readyState === 'complete') {
      setTimeout(() => {
        const target = document.getElementsByClassName("vsubmit vbtn")[0]
        target.outerHTML = target.outerHTML
        setTimeout(() => {
          document.getElementsByClassName("vsubmit vbtn")[0].addEventListener('click', gotoComment)
          console.log("event replaced")
        }, 1000)
        document.getElementsByClassName("power txt-right")[0].innerHTML = "Once powered by Valine"
      }, 1000)
     }
   }
 </script></div><footer><p class="site-info"> 博客已萌萌哒运行<span id="time-to-now"></span><span class="my-face">(●'◡'●)ﾉ♥</span><br> Theme - <a target="_blank" href="https://github.com/dongyuanxin/theme-bmw">BMW</a> | Made With 💗 | Powered by GodBMW & hellflame<br></p></footer><script src="/js/footer.js"></script><script>updateUptime(2016,3,27)</script><div class="back-to-top hidden"><span><i class="iconfont icon-60"></i><span></span> %</span></div><script src="/js/component/back-to-top.js"></script></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script src="/js/mathjax.js"></script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.js" async></script><script async src="/js/fancybox.js"></script></body></html>