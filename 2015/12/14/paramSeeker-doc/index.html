<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><title>paramSeeker | Hellflame</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="documents,python,"><meta name="description" content="pleased or sad, everything dies with hellflame"><link rel="alternate" href="/atom.xml" title="Hellflame" type="application/atom+xml"><link rel="icon" href="/images/favicon.png"><link rel="apple-touch-icon" href="/images/favicon.png"><link href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/base.css"><link rel="stylesheet" href="/icon/iconfont.css"><link rel="stylesheet" href="/css/github-markdown.css"><link rel="stylesheet" href="/css/highlight.css"><script src="/js/util.js"></script><script src="/js/valine.min.js"></script><link href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" async></script><script src="/js/player.js"></script><link href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/leancloud-storage@3.11.0/dist/av-min.js"></script></head><body><div id="app"><div class="header-wrap"><header><div class="site-brand"><div class="site-title"> <a href="/">Hellflame</a></div></div><nav class="site-navigation"><ul class="nav-menu"><li class="nav-item" data-path="/"> <a href="/" target="_self">首页</a></li><li class="nav-item" data-path="/archives/"> <a href="/archives/" target="_self">归档</a></li><li class="nav-item" data-path="/categories/"> <a href="/categories/" target="_self">分类</a></li><li class="nav-item" data-path="/tags/"> <a href="/tags/" target="_self">标签</a></li><li class="nav-item" data-path="/friends/"> <a href="/friends/" target="_self">友链</a></li><li class="nav-item" data-path="/corner-story/"> <a href="/corner-story/" target="_self">转角杀</a></li><li class="nav-item" data-path="/about/"> <a href="/about/" target="_self">关于</a></li><li class="nav-item" data-path="https://github.com/hellflame"> <a href="https://github.com/hellflame" target="_self">Github</a></li></ul></nav><i class="iconfont icon-menu"></i></header></div><script src="/js/navigation.js"></script><div class="container post-index"><div class="post"><div style="position:fixed;right:1em;top:1.5em;cursor:pointer;z-index:999" onclick="toggleTOC()" id="toc"><div style="width:2em;height:2em"><div style="width:100%;height:3px;background:silver;margin-bottom:3px"></div><div style="width:100%;height:3px;background:silver;margin-bottom:3px"></div><div style="width:100%;height:3px;background:silver;margin-bottom:3px"></div></div></div><h1 class="article-title"> <span>paramSeeker</span></h1><div class="article-top-meta"> <span>发布 : 2015-12-14</span> <span>分类 : <a href="/categories/documents/">documents</a></span> <span>浏览 : <span class="article-timer">--</span></span></div><div class="article-content"><div class="markdown-body"><p>在终端获取参数，绑定参数到指定方法的python框架</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>第一次安装<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pip install paramseeker</span><br></pre></td></tr></table></figure><p></p><p>使用 <code>sudo</code> 是因为默认安装了一个测试脚本<br>升级安装请加上 <code>--upgrade</code></p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ seeker</span><br><span class="line">$ seeker -h</span><br></pre></td></tr></table></figure><p>该脚本并没有太多实际作用，只是为了演示，可以删除该接口，甚至删除安装目录中的<code>example.py</code></p><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>当然你也可以留着<code>example.py</code>，如果你在看到这句话之前就已经把她删掉了的话，可以看这个<a href="https://github.com/hellflame/paramSeeker/blob/master/paramSeeker/example.py" target="_blank" rel="noopener">example.py</a></p><p>接下来的使用说明其实已经包含在了<a href="https://github.com/hellflame/paramSeeker/blob/master/paramSeeker/seeker.py" target="_blank" rel="noopener">源码</a>的无数的注释，如果你能耐下心来看我刚过四级的英语的话，你可以跳过这部分了，讲真，<br>好吧，我会再重新翻译一遍注释的…..</p><p>至于为什么需要用到这个文件的话，当然是作为使用范例</p><p>以下开始创建一个简单的栗子：<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> paramSeeker.seeker <span class="keyword">import</span> ParamSeeker</span><br><span class="line">seeker = ParamSeeker()</span><br><span class="line"></span><br><span class="line"><span class="meta">@seeker.seek()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">no_head</span><span class="params">(wanted)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> wanted</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    seeker.run()</span><br></pre></td></tr></table></figure><p></p><p><code>run(no_output=True)</code>则会取消所有由paramseeker内部显示出的所有消息，输出只能通过<code>print</code></p><p>保存文件到test.py</p><p>在终端执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python test.py this is a <span class="built_in">test</span> string</span><br></pre></td></tr></table></figure><p>如果你能够看到正确的输出的话～～～好了～～～第一个程序已经编写出来了～～～<br>当然这肯定是不够的…..<code>example.py</code>里面看上去也没有这么简单，因为</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python test.py -h</span><br></pre></td></tr></table></figure><p>你可能会奇怪<code>-h</code>，因为你并没有去处理，不过你即使想处理，也没有给你机会…..这部分时paramseeker帮你完成的，也就是说每一个使用paramseeker来作为框架的程序，在你绑定参数的时候就已经完成了帮助菜单的生成，这对于那些想要自己定制帮助菜单的孩纸们来说也许是一个坏消息,不过我只想让使用者能用心于主体程序的开发上</p><p>现在开始更多的参数定制<br>在<code>test.py</code>中继续添加</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@seeker.seek('--linux', short='-l', extra=&#123;'desc': 'this is a test function', 'single_param': True&#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">first</span><span class="params">(wanted)</span>:</span></span><br><span class="line">    result = <span class="string">'\nthis is the first method responding with the argument `\033[01;31m&#123;&#125;\033[00m`\n'</span>.format(wanted)</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><p>保存并执行<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python test.py --linux she is the one</span><br></pre></td></tr></table></figure><p></p><p>得到的结果,如果不是报错信息的话，彩色终端应该是红色的<code>she</code>，好了～现在可以慢慢解释seeker.seek这个装饰器的参数了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">seek</span><span class="params">(self, param=<span class="string">''</span>, short=<span class="string">''</span>, is_mark=False, extra=&#123;&#125;)</span></span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">param：需要获取参数的完整形态，</span><br><span class="line">        比如--linux等，默认为空，为空是则响应没有参数头的情况</span><br><span class="line">short：需要获取参数的精简形态，</span><br><span class="line">        比如-l等，为空时表示该参数没有精简形态，</span><br><span class="line">        注意！当精简模式给出且is_mark为真的话，seeker将符合下列原则</span><br><span class="line">            如果 short=`-l`， is_mark=<span class="keyword">True</span></span><br><span class="line">             当输入为 -nutplas 等含有 `l` 的指令时，</span><br><span class="line">             将返回<span class="keyword">True</span>，即会执行与其绑定的方法</span><br><span class="line">is_mark：表示当这个参数出现时则执行与其绑定的方法，</span><br><span class="line">        即这个参数后面不需要由其他额外的输入，当然也不会把额外的输入交给绑定方法</span><br><span class="line">extra：关于参数的额外信息，字典，可选内容为：</span><br><span class="line">	group：参数所分组，默认为General</span><br><span class="line">	desc：关于这个参数的描述，用于帮助菜单</span><br><span class="line">	single_param：是否只接受单参数默认为<span class="keyword">False</span>，</span><br><span class="line">	                表示在这个参数后面连续一段距离的参数都会算作其参数</span><br><span class="line">	default：该参数的默认值，</span><br><span class="line">	        注意！因为有默认值，所以只要在绑定函数里返回非空字符串，</span><br><span class="line">	        结果中都会有输出，当然如果<span class="keyword">return</span> <span class="string">''</span> 的话就好了</span><br></pre></td></tr></table></figure><p>使用中请注意，所有绑定函数都务必接收 <code>wanted</code> 参数，It’s very very important，无论你是否需要这个参数，需要说一句的是，在处理默认参数问题的时候，可以通过<code>wanted</code> 来判断输入是否为默认值</p><blockquote><p>注意</p></blockquote><p>关于绑定方法是使用<code>print</code> 还是<code>return</code>：</p><p>程序的执行是将所有已经执行的方法的返回值合并到一起，在最后输出结果，<code>print</code> 将在执行绑定方法时执行，<br>所以如果你想要自己通过用户输入参数的顺序来决定输出顺序的话，自行<code>print</code>，并返回空字符即可</p><blockquote><p>其他设置</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">seeker.set_usage_desc(<span class="string">"python test.py [OPTION]... "</span>)</span><br><span class="line">seeker.set_usage_desc(<span class="string">"python test.py ..."</span>)</span><br><span class="line">seeker.set_desc(<span class="string">"this is a test program"</span>)</span><br></pre></td></tr></table></figure><p>很明显这是为了帮助菜单而准备的，set_usage_desc()用于说明进行相应操作的方式，添加位置只要在<code>run</code>之前就好，调用次数不限</p><p>set_desc()仅调用一次，用于整个程序的总说明</p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>出现问题请及时反馈</p><p><a href="https://github.com/hellflame/paramSeeker" target="_blank" rel="noopener">github</a></p></div></div><div class="copy-right"><div class="markdown-body"><blockquote> 本文作者 : hellflame<br> 原文链接 : <a href="">https://hellflame.github.io/2015/12/14/paramSeeker-doc/</a><br> 版权声明 : 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</blockquote></div></div><div class="social-share" style="margin-top:-2rem" data-wechat-qrcode-title="<p>微信扫一扫</p>" data-wechat-qrcode-helper="<p>微信右上角, 扫一扫分享</p>" data-sites="qzone, qq, weibo, facebook, twitter"> <span style="color:#6b7487;font-size:1.4rem">分享到:</span></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js" async></script><div class="article-footer"><div class="article-meta pull-left"><span><i class="iconfont icon-06tags"></i> 标签: <span class="span--tag"><a href="/tags/python/">#python</a></span></span></div><div class="article-meta pull-right"></div></div></div><aside id="sidebar"><p id="sidebar-header"></p><ol id="sidebar-toc"></ol></aside><script async>getTOC().length||$("#toc").remove()</script><nav class="post-navigation"><div class="nav-next"> 下一篇: <a href="/2015/12/28/say-but-not-said/" target="_self">不知所云</a><i class="iconfont icon-next"></i></div></nav><a href="#comment" class="comment-anchor"></a><div class="comment-title"><i class="iconfont icon-footprint"></i> 留下足迹<i class="iconfont icon-footprint"></i></div> <a style="margin-bottom:1em;display:block;cursor:pointer" onclick="gotoComment()">点击通过issue留言</a><div id="vcomments"></div><script defer="defer">new Valine({el:"#vcomments",appId:"a",appKey:"b",notify:!1,verify:!1,avatar:"robohash",placeholder:"不填邮箱，网址, 也能收到回复哦♪(^∇^*)\n当然也不一定会回复-_-",path:getRealPath()})</script><script defer="defer">
   function gotoComment() {
    location.href = `https://github.com/hellflame/hellflame.github.io/issues/new?title=关于%0A“paramSeeker”&body=%23%23%23%20[原文地址](https://hellflame.github.io/2015/12/14/paramSeeker-doc/)%0A%0A%23%23%23%20想说的话(问题/支持/异议)%20%20%0A%0A${document.getElementById('veditor').value}`
   }
   document.onreadystatechange = (e) => {
     if(document.readyState === 'complete') {
      setTimeout(() => {
        const target = document.getElementsByClassName("vsubmit vbtn")[0]
        target.outerHTML = target.outerHTML
        setTimeout(() => {
          document.getElementsByClassName("vsubmit vbtn")[0].addEventListener('click', gotoComment)
          console.log("event replaced")
        }, 1000)
        document.getElementsByClassName("power txt-right")[0].innerHTML = "Once powered by Valine"
      }, 1000)
     }
   }
 </script></div><footer><p class="site-info"> 博客已萌萌哒运行<span id="time-to-now"></span><span class="my-face">(●'◡'●)ﾉ♥</span><br> Theme - <a target="_blank" href="https://github.com/dongyuanxin/theme-bmw">BMW</a> | Made With 💗 | Powered by GodBMW & hellflame<br></p></footer><script src="/js/footer.js"></script><script>updateUptime(2016,3,27)</script><div class="back-to-top hidden"><span><i class="iconfont icon-60"></i><span></span> %</span></div><script src="/js/component/back-to-top.js"></script></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script src="/js/mathjax.js"></script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.js" async></script><script async src="/js/fancybox.js"></script></body></html>