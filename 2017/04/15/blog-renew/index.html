<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><title>网站更新 | Hellflame</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="diaries,"><meta name="description" content="pleased or sad, everything dies with hellflame"><link rel="alternate" href="/atom.xml" title="Hellflame" type="application/atom+xml"><link rel="icon" href="/images/favicon.png"><link rel="apple-touch-icon" href="/images/favicon.png"><link href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/base.css"><link rel="stylesheet" href="/icon/iconfont.css"><link rel="stylesheet" href="/css/github-markdown.css"><link rel="stylesheet" href="/css/highlight.css"><script src="/js/util.js"></script><script src="/js/valine.min.js"></script><link href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" async></script><script src="/js/player.js"></script><link href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/leancloud-storage@3.11.0/dist/av-min.js"></script></head><body><div id="app"><div class="header-wrap"><header><div class="site-brand"><div class="site-title"> <a href="/">Hellflame</a></div></div><nav class="site-navigation"><ul class="nav-menu"><li class="nav-item" data-path="/"> <a href="/" target="_self">首页</a></li><li class="nav-item" data-path="/archives/"> <a href="/archives/" target="_self">归档</a></li><li class="nav-item" data-path="/categories/"> <a href="/categories/" target="_self">分类</a></li><li class="nav-item" data-path="/tags/"> <a href="/tags/" target="_self">标签</a></li><li class="nav-item" data-path="/friends/"> <a href="/friends/" target="_self">友链</a></li><li class="nav-item" data-path="/about/"> <a href="/about/" target="_self">关于</a></li><li class="nav-item" data-path="https://github.com/hellflame"> <a href="https://github.com/hellflame" target="_self">Github</a></li></ul></nav><i class="iconfont icon-menu"></i></header></div><script src="/js/navigation.js"></script><div class="container post-index"><div class="post"><div style="position:fixed;right:1em;top:1.5em;cursor:pointer;z-index:999" onclick="toggleTOC()" id="toc"><div style="width:2em;height:2em"><div style="width:100%;height:3px;background:silver;margin-bottom:3px"></div><div style="width:100%;height:3px;background:silver;margin-bottom:3px"></div><div style="width:100%;height:3px;background:silver;margin-bottom:3px"></div></div></div><h1 class="article-title"> <span>网站更新</span></h1><div class="article-top-meta"> <span>发布 : 2017-04-15</span> <span>分类 : <a href="/categories/diaries/">diaries</a></span> <span>浏览 : <span class="article-timer">--</span></span></div><div class="article-content"><div class="markdown-body"><h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><p>每次网站更新, 基本上都是脱胎换骨. 当然不变的是内容</p><p>从静态生成(hexo) =&gt; 动态网站(python) =&gt; 静态生成(hexo)</p><blockquote><p>ps. 现在又换成了 <code>hexo</code>，也许是折腾的时间不多了吧</p></blockquote><p><a href="http://hellflame.github.io">上一个博客网站</a>是一个挂载在GitHub上的基于<code>Hexo</code>的静态网站，在服务器上也同步运行了一段时间，虽然上一次更新已经是2016-08-19，几乎大半年前了的样子。</p><p>当然主要是各种事情还是挺多的了，自己能够安排下来的完整时间越来越少，找不到想要写的东西也是一方面。还好难得在大学最后一个学期有相对较多的时间，于是用<code>Rimworld</code>作为奖励(虽然没有这个奖励网站也会很快完成的)，嗯，在完成网站升级之后就在steam上剁手，总结一下的话，<code>更新</code> 有以下部分</p><ul><li>网站动态化</li><li>丰富动画效果</li><li>使用MVVC框架 VUE</li><li>CSS样式自定义</li></ul><blockquote><p>网站开发大约经过了<code>1个半月</code></p></blockquote><h4 id="网站动态化"><a href="#网站动态化" class="headerlink" title="网站动态化"></a>网站动态化</h4><p>原来的网站使用<code>hexo</code>在本地生成页面，然后用git同步到GitHub，然后服务器上再同步git，进而在<a href="http://hellflame.hellflame.net" target="_blank" rel="noopener">hellflame.hellflame.net</a> 以及 <a href="https://www.hellflame.net" target="_blank" rel="noopener">www.hellflame.net</a> 就有需要的网站了，这其实并没有什么不好的</p><p>网站的动态化主要是为了给自己积累实践经验，比如接触有一段时间的<code>Vue</code>的前端框架，接触了比较久的<code>Tornado</code>，虽然用了很多，却都只停留在最基础的使用，想要找一个机会把以前看上去就很难的东西尝试一遍，比如<code>pjax</code>、<code>animation</code>、<code>前端</code>。看懂了和会用了基本上是两个概念，只有亲自动手才知道。。。。大多数的文档竟然这么难读懂</p><p>整个网站使用Vue作为前端框架，vue-router进行前端路由控制，<code>{mode:histoy}</code>让URL在变更的时候不会造成全局刷新，节约了在切换页面时带来的下载延时(虽然其实在服务器加速之后，<code>TCP连接</code>都已经很快了)，后端使用<code>Tornado</code>作为框架，成为网站的灵魂，<code>Nginx</code>进行反向代理，必要的时候可以利用负载均衡多开几个进程进行服务</p><p>当然网站整体的动态化可能带来的影响就是对于部分搜索引擎的不友好，因为他们还在那个用爬虫爬取页面数据的时代，我对于这部分搜索引擎的帮助仅仅在于将网站title和content description在直接访问时写进网站模版里，毕竟这只是自己的个人小站</p><h4 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h4><p>网站缺少了动画，总感觉变得低端了，，，所以也在新网站中加入了很多以前根本不会在意的动画，在<code>Vue</code>中调用组件以及切换页面的时候会比较注意渐变过程。</p><p>用<code>CSS</code>来控制的动画自然会比较简单，然而在页面数据加载完成之后的页面滚动效果却是用的<code>js</code>来实现的，一个模拟<code>ease</code>曲线的动画效果</p><p>但是发现页面在滚动的时候偶尔会出现卡顿的现象，可能是动画太多，也可能是监控事件太多的缘故，之后应该会做更多的测试</p><h4 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h4><p><code>Vue</code> 框架是从暑期实习开始使用的，那时候还是<code>1.x版本</code>，记得当时有人因为执行来<code>npm update</code>让整个项目都跑不起来的场景，现在在升级<code>Vue</code>的时候依然十分谨慎</p><p>之所以使用这个框架，也是因为当时接触这个框架的时候接触到的构建工具<code>webpack</code>。让我发现原来前端的代码其实也是可以很有条例，如此接近<code>python</code>的优雅，还可以在发布时将代码的压缩和优化都做好，完全颠覆了曾经看到的前端在页面中写着一个一个的<code>function</code>的场景，也让我发现了前端的强大。从那以后，自己起手的网站基本上都是<code>Vue</code>项目了，为了能让前端服务器和后端服务器同时起作用(因为对外的路由是由后端来完成的，<code>dev</code>模式下前端的js代码是动态生成的)，还特地为了前端服务器，在后端将部分链接进行重定向，最终让两者能够协同开发</p><h4 id="样式自定义"><a href="#样式自定义" class="headerlink" title="样式自定义"></a>样式自定义</h4><p>不像以前的项目，大家都懒得去手写样式，然后都使用着别人已经写好的样式，比如<code>bootstrap</code>、<code>UI-kit</code>、<code>Semantic-UI</code>等。为了让页面加载的js文件尽量小，现在网站所有的样式基本上都是手写的，做到了尽量的小，不用为了等待几百k的样式数据让网页标签上的小圈圈不停的转了(虽然现在一个页面需要加载的js依然在100+k，但是pjax之后的页面所需js就只有10k不到的数据量了，再加上访问网站第一次的数据缓存，就基本上都没有问题了)</p><p>手写样式，，当然也是为了做一个更符合自己口味的网站，虽然这次开发让我发现了原来<code>设计师</code>的确不是随随便便就出来的。。。</p><blockquote><p>由于是彻底的更新，所以以前的文章也就只能重新再发布一遍了=。=，具体发布时间就不想修改了</p></blockquote><h4 id="Bugs"><a href="#Bugs" class="headerlink" title="Bugs"></a>Bugs</h4><blockquote><p>六 7 29 09:00:48 CST 2017</p></blockquote><p>不知道为什么，网站首页会在<strong>Retina MacBook Pro</strong> 中的<strong>chrome stable</strong> 和 <strong>Safari</strong> 里面表现出一定的<strong>动画卡顿</strong> ，在升级Vue版本到现在的2.2.1之前，chrome的表现比safari更差一些。在 <strong>chrome canary</strong> 里面并没有观察到类似的现象，在独立安装的 <strong>windows</strong> 中，<strong>IE</strong> 和 <strong>chrome stable</strong> 也没有类似的现象发生，在parallel中安装的 <strong>windows 10</strong> 虚拟机中的 <strong>IE</strong> 中初始化动画存在卡顿，并且滚动过程会出现更乱的卡顿，出现背景图片震颤，在这个<strong>win10</strong> 中，<strong>chrome stable</strong>的表现和 <strong>rmbp</strong> 中问题表现差不多，只是更严重一点。</p><p>比较明显的问题其实出在网站背景图在视图中的时候(暂时忽略虚拟机中win10更糟糕的表现)，因为如果在自动上滚的动画结束之后，继续往下滚动的话，其实看不到什么卡顿，也就是说，这个问题的原因可能在于背景图片。</p><p>关于背景图片的话，除了使用了 <code>background-size:cover</code> 和 <code>background:fixed</code> 在移动端(无论ipad mini还是android 4.4) 会出现问题，另一个东西就是，背景图接下来的主体部分是用一个高度100%的空元素抵下去的。</p><ul><li>rmbp safari</li></ul><p><img src="https://static.hellflame.net/resource/190588ae090e17497de8dd64f6ffa505" alt="lag issue in rmbp safari"></p><ul><li>rmbp chrome stable</li></ul><p><img src="https://static.hellflame.net/resource/5afffb1e0a040b6b4fe15f075a410796" alt="rmbp chrome stable"></p><ul><li>网站运行时状态记录</li></ul><p><img src="https://static.hellflame.net/resource/62633f8e25326860db854a48a2830aff" alt="网站运行时状态记录"></p></div></div><div class="copy-right"><div class="markdown-body"><blockquote> 本文作者 : hellflame<br> 原文链接 : <a href="">https://hellflame.github.io/2017/04/15/blog-renew/</a><br> 版权声明 : 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</blockquote></div></div><div class="social-share" style="margin-top:-2rem" data-wechat-qrcode-title="<p>微信扫一扫</p>" data-wechat-qrcode-helper="<p>微信右上角, 扫一扫分享</p>" data-sites="qzone, qq, weibo, facebook, twitter"> <span style="color:#6b7487;font-size:1.4rem">分享到:</span></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js" async></script><div class="article-footer"><div class="article-meta pull-left"><span></span></div><div class="article-meta pull-right"></div></div></div><aside id="sidebar"><p id="sidebar-header"></p><ol id="sidebar-toc"></ol></aside><script async>getTOC().length||$("#toc").remove()</script><nav class="post-navigation"><div class="nav-pre"><i class="iconfont icon-prev"></i> 上一篇: <a href="/2016/08/19/month-after-being-a-internship/" target="_self">腾讯实习告一段落</a></div><div class="nav-next"> 下一篇: <a href="/2017/04/15/pypi-in-use/" target="_self">Pypi 使用</a><i class="iconfont icon-next"></i></div></nav><a href="#comment" class="comment-anchor"></a><div class="comment-title"><i class="iconfont icon-footprint"></i> 留下足迹<i class="iconfont icon-footprint"></i></div> <a style="margin-bottom:1em;display:block;cursor:pointer" onclick="gotoComment()">点击通过issue留言</a><div id="vcomments"></div><script defer="defer">new Valine({el:"#vcomments",appId:"a",appKey:"b",notify:!1,verify:!1,avatar:"robohash",placeholder:"不填邮箱，网址, 也能收到回复哦♪(^∇^*)\n当然也不一定会回复-_-",path:getRealPath()})</script><script defer="defer">
   function gotoComment() {
    location.href = `https://github.com/hellflame/hellflame.github.io/issues/new?title=关于%0A“%E7%BD%91%E7%AB%99%E6%9B%B4%E6%96%B0”&body=%23%23%23%20[原文地址](https://hellflame.github.io/2017/04/15/blog-renew/)%0A%0A%23%23%23%20想说的话(问题/支持/异议)%20%20%0A%0A${document.getElementById('veditor').value}`
   }
   document.onreadystatechange = (e) => {
     if(document.readyState === 'complete') {
      setTimeout(() => {
        const target = document.getElementsByClassName("vsubmit vbtn")[0]
        target.outerHTML = target.outerHTML
        setTimeout(() => {
          document.getElementsByClassName("vsubmit vbtn")[0].addEventListener('click', gotoComment)
          console.log("event replaced")
        }, 1000)
        document.getElementsByClassName("power txt-right")[0].innerHTML = "Once powered by Valine"
      }, 1000)
     }
   }
 </script></div><footer><p class="site-info"> 博客已萌萌哒运行<span id="time-to-now"></span><span class="my-face">(●'◡'●)ﾉ♥</span><br> Theme - <a target="_blank" href="https://github.com/dongyuanxin/theme-bmw">BMW</a> | Made With 💗 | Powered by GodBMW & hellflame<br></p></footer><script src="/js/footer.js"></script><script>updateUptime(2016,3,27)</script><div class="back-to-top hidden"><span><i class="iconfont icon-60"></i><span></span> %</span></div><script src="/js/component/back-to-top.js"></script></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script src="/js/mathjax.js"></script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.js" async></script><script async src="/js/fancybox.js"></script></body></html>