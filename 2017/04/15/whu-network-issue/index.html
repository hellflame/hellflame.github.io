<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><title>校园网验证漏洞 | Hellflame</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="diaries,secure,"><meta name="description" content="pleased or sad, everything dies with hellflame"><link rel="alternate" href="/atom.xml" title="Hellflame" type="application/atom+xml"><link rel="icon" href="/images/favicon.png"><link rel="apple-touch-icon" href="/images/favicon.png"><link href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/base.css"><link rel="stylesheet" href="/icon/iconfont.css"><link rel="stylesheet" href="/css/github-markdown.css"><link rel="stylesheet" href="/css/highlight.css"><script src="/js/util.js"></script><script src="/js/valine.min.js"></script><link href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" async></script><script src="/js/player.js"></script><link href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/leancloud-storage@3.11.0/dist/av-min.js"></script></head><body><div id="app"><div class="header-wrap"><header><div class="site-brand"><div class="site-title"> <a href="/">Hellflame</a></div></div><nav class="site-navigation"><ul class="nav-menu"><li class="nav-item" data-path="/"> <a href="/" target="_self">首页</a></li><li class="nav-item" data-path="/archives/"> <a href="/archives/" target="_self">归档</a></li><li class="nav-item" data-path="/categories/"> <a href="/categories/" target="_self">分类</a></li><li class="nav-item" data-path="/tags/"> <a href="/tags/" target="_self">标签</a></li><li class="nav-item" data-path="/friends/"> <a href="/friends/" target="_self">友链</a></li><li class="nav-item" data-path="/corner-story/"> <a href="/corner-story/" target="_self">转角杀</a></li><li class="nav-item" data-path="/about/"> <a href="/about/" target="_self">关于</a></li><li class="nav-item" data-path="https://github.com/hellflame"> <a href="https://github.com/hellflame" target="_self">Github</a></li></ul></nav><i class="iconfont icon-menu"></i></header></div><script src="/js/navigation.js"></script><div class="container post-index"><div class="post"><div style="position:fixed;right:1em;top:1.5em;cursor:pointer;z-index:999" onclick="toggleTOC()" id="toc"><div style="width:2em;height:2em"><div style="width:100%;height:3px;background:silver;margin-bottom:3px"></div><div style="width:100%;height:3px;background:silver;margin-bottom:3px"></div><div style="width:100%;height:3px;background:silver;margin-bottom:3px"></div></div></div><h1 class="article-title"> <span>校园网验证漏洞</span></h1><div class="article-top-meta"> <span>发布 : 2017-04-15</span> <span>分类 : <a href="/categories/diaries/">diaries</a></span> <span>浏览 : <span class="article-timer">--</span></span></div><div class="article-content"><div class="markdown-body"><p>这是关于已经修复的校园网漏洞，当初在找到这个漏洞的时候在群里承诺会告诉他们这个漏洞的详细信息，在修复之后</p><blockquote><p>当然，这个漏洞并没有被滥用</p></blockquote><h3 id="漏洞表现"><a href="#漏洞表现" class="headerlink" title="漏洞表现"></a>漏洞表现</h3><p>校园网用户只需要稍微修改页面，将对应的账号修改为目标账号，提交后即可修改对方账号</p><p>对于上一届经历过一次刷票大战的孩纸们不应该没有印象，我们给自己一下刷了几百票，给对手刷了负几百票，最后由于学长出卖，网站制作者修复了这个漏洞，所以我们也在最后时刻没能及时把自己的票刷上来，上一任技术总监一直在懊悔，后悔不应该把漏洞告诉太多人，还生气的拼命消耗对方的流量(网站搭建在SAE，流量靠云豆，云豆用人民币兑换)，当然时至今日，当时发现这个漏洞时激动的感觉，感觉整个网站都在自己的掌握之中了呢～～～</p><p>然而这次在我跟群里的孩纸们说我找到这个漏洞，还是关于网页的时候，他们并没有什么想法的样子，不过也可能是因为他们开发的网站还不够多，对于网站结构什么的掌握不是很清楚～～～～</p><h3 id="漏洞原因"><a href="#漏洞原因" class="headerlink" title="漏洞原因"></a>漏洞原因</h3><p>恩～网站的漏洞就简单的在于<code>过分相信来自前端的数据</code></p><p>刷票网站将投票的票数放在了网页前端，一个隐藏的<code>input</code>标签中，只要在谷歌浏览器中，右键审查元素，就会发现一个隐藏的<code>value=1</code>的输入标签，在服务器后端，一定是将这个<code>value</code>+数据库中的值保存在数据库</p><p>最终导致的漏洞很明显，给自己投票的时候，将这个<code>value=99999</code>，然后就无人能敌了，当然如果溢出的话，就只能呵呵了Orz，给别人投一个负票就可以把别人的票数减下来</p><p>这次校园网的漏洞也是这个原因，过分相信前端数据，或者说这些本来是<code>冗余数据</code><br>具体图片的话，待我回学校后再弄好了(校园网前端这是不堪入目)</p><p>校园网将需要重置的账户，<code>readonly=true</code>的放在了简陋的html里面，只需要直接修改这个input中的value为指定用户就可以了，由于账号就是学号，大家的学号并不是什么秘密，指定用户修改也就不是什么难事了</p><h3 id="漏洞的发现"><a href="#漏洞的发现" class="headerlink" title="漏洞的发现"></a>漏洞的发现</h3><p>回过头来说说当初是怎么发现这个漏洞的</p><p>校园网漏洞的发现离不开上一次刷票漏洞的发现(因为那次印象很深刻)，当然，刷票漏洞的发现是上一任技术总监</p><p>当时，自己的校园网余额就只有两天的量了，然而我的校园卡账户被冻结了(在校园卡只剩下几块钱后，貌似就会被几率冻结，真是差评，不能欠费再冻结么！)，然而校园卡的解冻只有在工作日，还在我的上课时间，根本不能忍，然后开始找在网页上直接充值的方式，虽然找到一个正在建立的简陋的“交易网站”！！卖的东西还是迷之<code>test</code>。对，这个网站还在开发中，根据报错信息，是java后台(连报错信息还在界面显示，都可以看到时哪一句代码出错了)，还发现在url中一部分用<code>base64</code>编码的东西</p><p>就在找不到任何解决办法的情况下，点开了所有能用的链接，发现了那个简陋的只有一个<code>table</code>的密码重置表单，想起了当年的漏洞原因，试着改了一下账号最后一位，恩，就是室友的账号，提交，没有任何报错，发现我的密码并没有被修改，当然此时也没有去测试室友的账号，因为他还在寝室用手机连着校园网上网，也就暂时把修改密码这件事放在一边了，直到室友开始抱怨<code>这校园网不知道怎么了，又抽风了，怎么都登陆不上去</code>，然后，作为对于这些比较熟悉的我就开始帮他看看不能登陆的原因，发现是用户名或密码错误，虽然他在一边说<code>我的手机还是可以联网的</code>，但是开始怀疑是真的把他的密码给改了，我帮他进入密码重置界面，重置密码后，电脑可以成功登陆了～～(好了，第一个受害者脱困了)，第一个受害者真的是无意中的发现，在他看到这篇文章之前，一定什么也不会知道的23333</p><p>帮室友脱困后，就将漏洞存在这个事情告诉了群里的孩纸们，征集测试者，当然漏洞要暂时保密。</p><p>第二天，吃螃蟹的骚年就粗现了，漏洞被验证了。准备把这个漏洞告诉管理员，然而一直找不到关于校园网开发的管理员联系方式，漏洞被搁置了几天，期间都是去蹭网orz</p><p>随后感觉这样的漏洞的存在迟早会被其他人发现，如果被滥用，结果总是不好的</p><p>最终发短信给了本宿舍楼的故障报修员，当然他不会马上相信我，于是他变成了第三个‘受害者’，他说第二天会让负责的老师联系我，然而，这个事情就泥牛入海了，没有任何人联系我，在跟那个故障报修员联系后，确认漏洞已经修复了。突然失望的想起了曾经在网上看到的一起腾讯关于漏洞的处理方式</p><p>关于那次腾讯的漏洞问题，我只是在看到有人爆料，该漏洞已经泄露大量账户之间的关系信息，即知道某一账号跟其他账号的关系，这个关系数据，当然要比武大的校园网验证漏洞大很多，然而他们的处理方式是一样的，没有多少人知道这个漏洞的存在，发现上述漏洞的开发者通知了腾讯相关漏洞信息，当然这个漏洞的细节应该还是没能公开出来，当然是有安全原因，可以理解，然而这样大的漏洞既然已经造成了隐私泄露，不应该提醒相关用户注意自己的账户安全么，不法分子利用漏洞信息，有针对性的盗取关键人物账号，之后会发生什么根本无法预料</p><p>也许我的联想根本风马牛不相及，然而这却是在这次校园网漏洞之后联想到的第一件事～～～</p><p>也许是我想多了吧～～～</p></div></div><div class="copy-right"><div class="markdown-body"><blockquote> 本文作者 : hellflame<br> 原文链接 : <a href="">https://hellflame.github.io/2017/04/15/whu-network-issue/</a><br> 版权声明 : 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</blockquote></div></div><div class="social-share" style="margin-top:-2rem" data-wechat-qrcode-title="<p>微信扫一扫</p>" data-wechat-qrcode-helper="<p>微信右上角, 扫一扫分享</p>" data-sites="qzone, qq, weibo, facebook, twitter"> <span style="color:#6b7487;font-size:1.4rem">分享到:</span></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js" async></script><div class="article-footer"><div class="article-meta pull-left"><span><i class="iconfont icon-06tags"></i> 标签: <span class="span--tag"><a href="/tags/secure/">#secure</a></span></span></div><div class="article-meta pull-right"></div></div></div><aside id="sidebar"><p id="sidebar-header"></p><ol id="sidebar-toc"></ol></aside><script async>getTOC().length||$("#toc").remove()</script><nav class="post-navigation"><div class="nav-pre"><i class="iconfont icon-prev"></i> 上一篇: <a href="/2017/04/15/about-iplocate/" target="_self">ipLocate</a></div><div class="nav-next"> 下一篇: <a href="/2017/04/15/winter-holiday-end/" target="_self">寒假结束</a><i class="iconfont icon-next"></i></div></nav><a href="#comment" class="comment-anchor"></a><div class="comment-title"><i class="iconfont icon-footprint"></i> 留下足迹<i class="iconfont icon-footprint"></i></div> <a style="margin-bottom:1em;display:block;cursor:pointer" onclick="gotoComment()">点击通过issue留言</a><div id="vcomments"></div><script defer="defer">new Valine({el:"#vcomments",appId:"a",appKey:"b",notify:!1,verify:!1,avatar:"robohash",placeholder:"不填邮箱，网址, 也能收到回复哦♪(^∇^*)\n当然也不一定会回复-_-",path:getRealPath()})</script><script defer="defer">
   function gotoComment() {
    location.href = `https://github.com/hellflame/hellflame.github.io/issues/new?title=关于%0A“%E6%A0%A1%E5%9B%AD%E7%BD%91%E9%AA%8C%E8%AF%81%E6%BC%8F%E6%B4%9E”&body=%23%23%23%20[原文地址](https://hellflame.github.io/2017/04/15/whu-network-issue/)%0A%0A%23%23%23%20想说的话(问题/支持/异议)%20%20%0A%0A${document.getElementById('veditor').value}`
   }
   document.onreadystatechange = (e) => {
     if(document.readyState === 'complete') {
      setTimeout(() => {
        const target = document.getElementsByClassName("vsubmit vbtn")[0]
        target.outerHTML = target.outerHTML
        setTimeout(() => {
          document.getElementsByClassName("vsubmit vbtn")[0].addEventListener('click', gotoComment)
          console.log("event replaced")
        }, 1000)
        document.getElementsByClassName("power txt-right")[0].innerHTML = "Once powered by Valine"
      }, 1000)
     }
   }
 </script></div><footer><p class="site-info"> 博客已萌萌哒运行<span id="time-to-now"></span><span class="my-face">(●'◡'●)ﾉ♥</span><br> Theme - <a target="_blank" href="https://github.com/dongyuanxin/theme-bmw">BMW</a> | Made With 💗 | Powered by GodBMW & hellflame<br></p></footer><script src="/js/footer.js"></script><script>updateUptime(2016,3,27)</script><div class="back-to-top hidden"><span><i class="iconfont icon-60"></i><span></span> %</span></div><script src="/js/component/back-to-top.js"></script></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script src="/js/mathjax.js"></script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.js" async></script><script async src="/js/fancybox.js"></script></body></html>